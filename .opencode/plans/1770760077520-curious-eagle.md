Ticket system plan

Goal
- Add per-org+prefix ticket number for each domain entity (exclude event).
- Ticket format: PREFIX-N (PREFIX = existing id prefix uppercased, N increments from 1 per org+prefix).
- Counter stored in separate table.

Scope (domain entities)
- Include all in packages/domain/src except event: framework, control, policy, risk, issue, audit, audit-run, assessment-template, assessment-instance, evidence, schedule, schedule-run, comment, pdf, pdf-page, questioner-template, questioner-instance.

Design
- Domain: add `ticket` field to each entity schema; require on create; preserve on update.
- Core: new `ticket_counter` table keyed by (org_id, prefix) with serial; atomic upsert to get next number.
- Storage: add `ticket` column to each entity table + unique index on (org_id, ticket).
- Backfill: migration to set tickets for existing rows per org+prefix ordered by created_at; seed counter table to next number.

Steps
1) Domain updates
   - Add ticket type/validator in base or per-entity.
   - For each entity file, add `ticket` to schema + Create type; `make` requires ticket; `update` keeps ticket.
   - Update domain tests to expect ticket.

2) Core ticket module
   - Add `packages/core/src/ticket/sql.ts` with table definition.
   - Add `packages/core/src/ticket/service.ts` with `next(orgId, prefix)` using atomic upsert + return serial.
   - Wire table in `packages/core/src/db.ts`.

3) Core entity create flows
   - For each entity service create path, call `TicketService.next(orgId, PREFIX)` and pass ticket into domain `make`.
   - Keep update/delete behavior unchanged.

4) Migrations
   - New migration to create `ticket_counter` table.
   - Add `ticket` column to each entity table; add unique index (org_id, ticket).
   - Backfill tickets per table (org+prefix ordered by created_at) + initialize counters.
   - Update migration meta snapshot if required.

5) Tests + checks
   - Update domain tests in packages/domain/src/test to include ticket field in snapshots.
   - Add/adjust core service tests for ticket increment per org+prefix.
   - Run `bun scan:fix` and fix findings.

Files (expected)
- Domain: packages/domain/src/*.ts (entities listed above) + packages/domain/src/test/*.test.ts
- Core: packages/core/src/ticket/sql.ts, packages/core/src/ticket/service.ts, packages/core/src/db.ts
- Core entity sql/service files per entity (for ticket column + create flow)
- Migrations: packages/core/migrations/*.sql and meta snapshots

Verification
- bun scan:fix
- Relevant domain tests (bun test packages/domain)
- Any core service tests touching create flows

Unresolved questions
- None.
